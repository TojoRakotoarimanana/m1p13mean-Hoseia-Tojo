<!-- ELEGANT SIDEBAR - APPLE STYLE WITH PRIMENG -->
@if (authService.isLoggedIn()) {
<div class="sidebar">
    <!-- Header with Logo -->
    <div class="sidebar-header">
        <div class="logo-container">
            <i class="pi pi-shopping-bag logo-icon"></i>
            <div class="logo-text">
                <h2 class="app-name">Mall Center</h2>
                <span class="app-subtitle">Management</span>
            </div>
        </div>
    </div>

    <!-- User Profile Card -->
    @if (user) {
    <div class="user-section">
        <p-card class="user-card">
            <div class="user-content">
                <p-avatar [label]="user.firstName?.charAt(0) + user.lastName?.charAt(0)" size="large" shape="circle"
                    [style]="{'background-color': '#1a1a1a', 'color': '#ffffff'}">
                </p-avatar>
                <div class="user-details">
                    <div class="user-name">{{ user.firstName }} {{ user.lastName }}</div>
                    <p-chip [label]="user.role"
                        [style]="{'background': '#f5f5f7', 'color': '#1d1d1f', 'font-size': '11px'}">
                    </p-chip>
                </div>
            </div>
        </p-card>
    </div>
    }

    <!-- Navigation Menu -->
    <nav class="sidebar-nav">
        <p-divider align="left" type="solid">
            <span class="section-label">Navigation</span>
        </p-divider>

        <div class="nav-items">
            @for (item of items; track item.label) {
            <!-- Menu item with submenu -->
            @if (item.items && item.items.length > 0) {
            <div class="nav-group">
                <div class="nav-item nav-parent" [class.expanded]="item.expanded" (click)="toggleSubmenu(item)" pRipple>
                    <i [class]="item.icon" class="nav-icon"></i>
                    <span class="nav-label">{{ item.label }}</span>
                    <i class="pi pi-chevron-down nav-chevron" [class.rotated]="item.expanded"></i>
                </div>

                <!-- Submenu items -->
                <div class="submenu" [class.expanded]="item.expanded">
                    @for (subItem of item.items; track subItem.label) {
                    <a [routerLink]="subItem.routerLink" routerLinkActive="active" class="nav-item nav-subitem" pRipple>
                        <i [class]="subItem.icon" class="nav-icon"></i>
                        <span class="nav-label">{{ subItem.label }}</span>
                        <i class="pi pi-angle-right nav-arrow"></i>
                    </a>
                    }
                </div>
            </div>
            } @else {
            <!-- Simple menu item without submenu -->
            <a [routerLink]="item.routerLink" routerLinkActive="active" class="nav-item" pRipple>
                <i [class]="item.icon" class="nav-icon"></i>
                <span class="nav-label">{{ item.label }}</span>
                <i class="pi pi-angle-right nav-arrow"></i>
            </a>
            }
            }
        </div>
    </nav>

    <!-- Footer -->
    <div class="sidebar-footer">
        <p-divider></p-divider>
        <p-button [label]="'DÃ©connexion'" icon="pi pi-power-off" [text]="true" severity="secondary" (onClick)="logout()"
            styleClass="logout-btn">
        </p-button>
    </div>
</div>
}